
# 如何实现零宕机应用服务滚动升级
- 蓝绿发布
不停老版本，部署新版本进行测试，确认OK，将流量切到新版本，然后老版本同时也升级到新版本。始终有两个版本同时在线，有问题可以快速切换。只要老版本的资源不被删除，可以在任何时间回滚到老版本。
蓝绿部署要求在升级过程中，同时运行两套程序，对硬件的要求就是日常所需的二倍，比如日常运行时，需要10台服务器支撑业务，那么使用蓝绿部署，你就需要购置二十台服务器。
- 金丝雀发布（canary）
在生产环境上引一部分实际流量对一个新版本进行测试，测试新版本的性能和表现，在保证系统整体稳定运行的前提下，尽早发现新版本在实际环境上的问题。
逐点部署，逐步替换线上服务
只能适用于兼容迭代的方式，如果是大版本不兼容的场景，就没办法使用这种方式了
- 灰度发布


蓝绿部署中，还要注意一些细节：

需考虑数据库对新老版本的兼容性
需要提前考虑数据库与应用部署同步迁移和回滚的问题
在非隔离基础架构（ VM 、 Docker 等）上执行蓝绿部署，蓝色环境和绿色环境有被摧毁的风险


